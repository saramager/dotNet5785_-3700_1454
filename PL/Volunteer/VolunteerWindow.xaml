<!--xmlns:local="clr-namespace:PL.Volunteer"-->

<Window x:Class="PL.Volunteer.VolunteerWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:PL.Volunteer"

        mc:Ignorable="d"
        Title="VolunteerWindow" Height="728" Width="1000"
         Background="{StaticResource cream}"
        DataContext="{Binding RelativeSource={RelativeSource Mode=Self}}">
    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="2*"/>
            <ColumnDefinition Width="1*"/>
        </Grid.ColumnDefinitions>

        <!-- Left Side - Volunteer Information -->
        <DockPanel Grid.Column="0" Margin="10">
            <GroupBox Header="Volunteer Information" DockPanel.Dock="Top" Height="552">
                <ScrollViewer VerticalScrollBarVisibility="Auto" MaxHeight="500" Height="535">
                    <StackPanel Margin="5">
                        <!-- ID -->
                        <Label Content="ID:" Margin="0,5,0,0"/>
                        <TextBox Text="{Binding CurrentVolunteer.Id, Mode=TwoWay, NotifyOnValidationError=true, ValidatesOnExceptions=true}" HorizontalAlignment="Center"
                          Style="{StaticResource ElegantTextBox}" Height="35" 
                         IsReadOnly="{Binding ButtonText, Converter={StaticResource ConvertUpdateToTrueKey}}" Width="590" />

                        <!-- Name -->
                        <Label Content="Name:" Margin="0,5,0,0"/>
                        <TextBox Text="{Binding CurrentVolunteer.fullName, Mode=TwoWay, NotifyOnValidationError=true, ValidatesOnExceptions=true}" HorizontalAlignment="Left"
                           Style="{StaticResource ElegantTextBox}" Height="37" Margin="0,0,0,10" Width="590"/>

                        <!-- Email -->
                        <Label Content="Email:" Margin="0,5,0,0"/>
                        <TextBox Text="{Binding CurrentVolunteer.email, Mode=TwoWay, NotifyOnValidationError=true, ValidatesOnExceptions=true}" HorizontalAlignment="Left"
                          Style="{StaticResource ElegantTextBox}" Height="37" Margin="0,0,0,10" Width="590"/>

                        <!-- Phone -->
                        <Label Content="Phone Number:" Margin="0,5,0,0"/>
                        <TextBox Text="{Binding CurrentVolunteer.phone, Mode=TwoWay, NotifyOnValidationError=true, ValidatesOnExceptions=true}" HorizontalAlignment="Left"
                          Style="{StaticResource ElegantTextBox}" Height="35" Margin="0,0,0,10" Width="590"/>

                        <!-- Password -->
                        <Label Content="Password:" Margin="0,5,0,0"/>
                        <TextBox Text="{Binding CurrentVolunteer.password, Mode=TwoWay, NotifyOnValidationError=true, ValidatesOnExceptions=true}" HorizontalAlignment="Left"
                          Style="{StaticResource ElegantTextBox}" Height="37" Margin="0,0,0,10" Width="590"/>

                        <!-- Address -->
                        <Label Content="Full Address:" Margin="0,5,0,0"/>
                        <TextBox Text="{Binding CurrentVolunteer.currentAddress, Mode=TwoWay, NotifyOnValidationError=true, ValidatesOnExceptions=true}" HorizontalAlignment="Left"
                          Style="{StaticResource ElegantTextBox}" Height="37" Margin="0,0,0,10" Width="590">
                            <TextBox.Background>
                                <MultiBinding Converter="{StaticResource ConverterThreeValueNullToColorKey}">
                                    <Binding Path="CurrentVolunteer.currentAddress" />
                                    <Binding Path="CurrentVolunteer.Latitude" />
                                    <Binding Path="CurrentVolunteer.Longitude" />
                                </MultiBinding>
                            </TextBox.Background>

                        </TextBox>


                        <!-- Role -->
                        <Label Content="Role:"/>
                        <ComboBox Height="25" Style="{StaticResource ElegantComboBox}" 
                          SelectedItem="{Binding CurrentVolunteer.role, Mode=TwoWay, NotifyOnValidationError=true, ValidatesOnExceptions=true}"
                          ItemsSource="{Binding Source={StaticResource VolunteerRolesKey}}" Width="590"/>

                        <!-- Active Status -->
                        <CheckBox IsChecked="{Binding Path=CurrentVolunteer.active}"
                          Content="Active Volunteer?"
                          Margin="0,5,0,10"/>

                        <!-- Max Distance -->
                        <Label Content="Max Distance for Call:" Margin="0,5,0,0"/>
                        <TextBox Text="{Binding CurrentVolunteer.maxDistance, Mode=TwoWay, NotifyOnValidationError=true, ValidatesOnExceptions=true}"
                         Style="{StaticResource ElegantTextBox}" Height="30" Margin="0,0,0,10" Width="590"/>

                        <!-- Distance Type -->
                        <Label Content="Distance Type:" Margin="0,5,0,0"/>
                        <ComboBox Height="25" Margin="0,0,0,10" Style="{StaticResource ElegantComboBox}" 
                          SelectedItem="{Binding CurrentVolunteer.distanceType, Mode=TwoWay, NotifyOnValidationError=true, ValidatesOnExceptions=true}"
                          ItemsSource="{Binding Source={StaticResource DistanceTypeKey}}" Width="590"/>
                    </StackPanel>
                </ScrollViewer>
            </GroupBox>

            <Button DockPanel.Dock="Bottom" Content="{Binding ButtonText}"  Style="{StaticResource SecondaryButton}"
            Click="btnAddUpdate_Click" Height="76" Margin="0,10,0,0" 
            FontSize="14" Width="226"/>
        </DockPanel>

        <!-- Right Side - Current Call Information -->
        <GroupBox Grid.Column="1" Visibility="{Binding CurrentVolunteer.callProgress, Converter={StaticResource ConvertNullToVisibilityKey}}"
                   Background="{StaticResource PinkGrey}" Header="Current Call Information" Margin="10" >
            <ScrollViewer VerticalScrollBarVisibility="Auto">
                <Grid Margin="5">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="*"/>
                        <RowDefinition Height="*"/>
                        <RowDefinition Height="*"/>
                        <RowDefinition Height="*"/>
                        <RowDefinition Height="*"/>
                        <RowDefinition Height="*"/>
                        <RowDefinition Height="*"/>
                        <RowDefinition Height="*"/>
                        <RowDefinition Height="*"/>
                    </Grid.RowDefinitions>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>

                    <!-- Call ID -->
                    <TextBlock Text="ID:" Grid.Row="0" Grid.Column="0" Margin="0,0,5,2" VerticalAlignment="Center"/>
                    <TextBox Text="{Binding CurrentVolunteer.callProgress.CallId , Mode=OneWay}"  Style="{StaticResource ElegantTextBox}"
                             Grid.Row="0" Margin="116,0,0,2" Height="35" IsReadOnly="True" Grid.ColumnSpan="2"/>

                    <!-- Call Type -->
                    <TextBlock Text="Type:" Grid.Row="1" Grid.Column="0" Margin="0,0,5,2" VerticalAlignment="Center"/>
                    <TextBox Text="{Binding CurrentVolunteer.callProgress.callT, Mode=OneWay}"  Style="{StaticResource ElegantTextBox}"
                             Grid.Row="1" Margin="116,9,0,11" Height="35" IsReadOnly="True" Grid.ColumnSpan="2"/>

                    <!-- Description -->
                    <TextBlock Text="Description:" Grid.Row="2" Grid.Column="0" Margin="0,0,5,2" VerticalAlignment="Top"/>
                    <TextBox Text="{Binding CurrentVolunteer.callProgress.verbalDescription, Mode=OneWay}"
         Grid.Row="2" Margin="116,19,0,15" Height="150" 
         Style="{StaticResource ElegantTextBox}"
         TextWrapping="Wrap" IsReadOnly="True"
         VerticalScrollBarVisibility="Auto" 
         HorizontalScrollBarVisibility="Auto" Grid.ColumnSpan="2"/>

                    <!-- Address -->
                    <TextBlock Text="Address:" Grid.Row="3" Grid.Column="0" Margin="0,0,5,2" VerticalAlignment="Center"/>
                    <TextBox Text="{Binding CurrentVolunteer.callProgress.address, Mode=OneWay}" 
         Style="{StaticResource ElegantTextBox}"
         Grid.Row="3" Margin="116,7,0,10" IsReadOnly="True" 
         Grid.ColumnSpan="2"
         VerticalScrollBarVisibility="Auto" 
         HorizontalScrollBarVisibility="Auto" 
         TextWrapping="Wrap"/>

                    <!-- Open Time -->
                    <TextBlock Text="Opened:" Grid.Row="4" Grid.Column="0" Margin="0,0,5,2" VerticalAlignment="Center"/>
                    <TextBox Text="{Binding CurrentVolunteer.callProgress.openTime, StringFormat='dd/MM/yyyy HH:mm', Mode=OneWay}"
                               Style="{StaticResource ElegantTextBox}" Grid.Row="4" Margin="116,8,0,11" Height="35" IsReadOnly="True" Grid.ColumnSpan="2"/>

                    <!-- Max Time -->
                    <TextBlock Text="Max Time:" Grid.Row="5" Grid.Column="0" Margin="0,0,5,2" VerticalAlignment="Center"/>
                    <TextBox Text="{Binding CurrentVolunteer.callProgress.maxTime, StringFormat='dd/MM/yyyy HH:mm', Mode=OneWay}"
                           Style="{StaticResource ElegantTextBox}"   Grid.Row="5" Margin="116,9,0,11" Height="35" IsReadOnly="True" Grid.ColumnSpan="2"/>

                    <!-- Start Treatment -->
                    <TextBlock Text="Started:" Grid.Row="6" Grid.Column="0" Margin="0,0,5,2" VerticalAlignment="Center"/>
                    <TextBox Text="{Binding CurrentVolunteer.callProgress.startTreatment, StringFormat='dd/MM/yyyy HH:mm', Mode=OneWay}"
                             Style="{StaticResource ElegantTextBox}" Grid.Row="6" Margin="116,9,0,10" Height="35" IsReadOnly="True" Grid.ColumnSpan="2"/>

                    <!-- Distance -->
                    <TextBlock Text="Distance:" Grid.Row="7" Grid.Column="0" Margin="0,0,5,2" VerticalAlignment="Center"/>
                    <TextBox Text="{Binding CurrentVolunteer.callProgress.CallDistance, Mode=OneWay}"
                            Style="{StaticResource ElegantTextBox}" Grid.Row="7" Margin="116,9,0,11" Height="35" IsReadOnly="True" Grid.ColumnSpan="2"/>

                    <!-- Status -->
                    <TextBlock Text="Status:" Grid.Row="8" Grid.Column="0" Margin="0,0,5,2" VerticalAlignment="Center"/>
                    <TextBox Text="{Binding CurrentVolunteer.callProgress.statusT, Mode=OneWay}"  Style="{StaticResource ElegantTextBox}"
                            Height="37" Grid.Row="8" Margin="0,0,0,19" IsReadOnly="True" HorizontalAlignment="Right" Width="175" Grid.ColumnSpan="2"/>
                </Grid>
            </ScrollViewer>
        </GroupBox>
    </Grid>
</Window>