<Window x:Class="PL.VolunteerScreens.VolnteerMainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:PL.VolunteerScreens"
        mc:Ignorable="d"
         DataContext="{Binding RelativeSource={RelativeSource Mode=Self}}"

        Title="VolnteerMainWindow" Height="750" Width="1000">
    <Grid Margin="10">
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="1*"/>
            <ColumnDefinition Width="1*"/>
        </Grid.ColumnDefinitions>
        <Grid.RowDefinitions>
            <RowDefinition Height="auto"/>
            <RowDefinition Height="auto"/>
        </Grid.RowDefinitions>

        <!-- Left Stack Panel - Volunteer Details -->
       
        <ScrollViewer Grid.Column="0" Grid.Row="0" VerticalScrollBarVisibility="Auto" Margin="0,0,10,0">
            <StackPanel>
                <!-- Original volunteer fields content stays exactly the same -->
                <!-- Volunteer ID field -->
                <Label>Content="Vlounter Diteails "</Label>
                <Grid Margin="0,0,0,5">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="120" />
                        <ColumnDefinition Width="*" />
                    </Grid.ColumnDefinitions>
                    <Label Content="ID" HorizontalAlignment="Left" Height="20" VerticalAlignment="Top" Width="90"/>
                    <TextBox Grid.Column="1" Text="{Binding CurrentVolunteer.Id, Mode=TwoWay}" HorizontalAlignment="Left" Height="25" TextWrapping="Wrap" VerticalAlignment="Top" Width="200"
                         IsReadOnly="True"/>
                </Grid>

                <!-- Keep all other volunteer fields exactly as they were -->
                <!-- ... (all other volunteer fields remain unchanged) ... -->
                <!-- Volunteer name field -->
                <Grid Margin="0,0,0,5">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="120" />
                        <ColumnDefinition Width="*" />
                    </Grid.ColumnDefinitions>
                    <Label Content="Name" HorizontalAlignment="Left" Height="20" VerticalAlignment="Top" Width="90"/>
                    <TextBox Grid.Column="1" Text="{Binding CurrentVolunteer.fullName, Mode=TwoWay, NotifyOnValidationError=true, ValidatesOnExceptions=true}" HorizontalAlignment="Left" Height="25" TextWrapping="Wrap" VerticalAlignment="Top" Width="200"/>
                </Grid>

                <!-- Volunteer email field -->
                <Grid Margin="0,0,0,5">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="120" />
                        <ColumnDefinition Width="*" />
                    </Grid.ColumnDefinitions>
                    <Label Content="Email" HorizontalAlignment="Left" Height="20" VerticalAlignment="Top" Width="90"/>
                    <TextBox Grid.Column="1" Text="{Binding CurrentVolunteer.email, Mode=TwoWay, NotifyOnValidationError=true, ValidatesOnExceptions=true}" HorizontalAlignment="Left" Height="25" TextWrapping="Wrap" VerticalAlignment="Top" Width="200"/>
                </Grid>

                <!-- Volunteer password field -->
                <Grid Margin="0,0,0,5">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="120" />
                        <ColumnDefinition Width="*" />
                    </Grid.ColumnDefinitions>
                    <Label Content="Password" HorizontalAlignment="Left" Height="20" VerticalAlignment="Top" Width="90"/>
                    <TextBox Grid.Column="1" Text="{Binding CurrentVolunteer.password, Mode=TwoWay, NotifyOnValidationError=true, ValidatesOnExceptions=true}" HorizontalAlignment="Left" Height="25" TextWrapping="Wrap" VerticalAlignment="Top" Width="200"/>
                </Grid>

                <!-- Volunteer phone number field -->
                <Grid Margin="0,0,0,5">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="120" />
                        <ColumnDefinition Width="*" />
                    </Grid.ColumnDefinitions>
                    <Label Content="Phone Number" HorizontalAlignment="Left" Height="20" VerticalAlignment="Bottom" Width="90" Margin="0,0,0,5"/>
                    <TextBox Grid.Column="1" Text="{Binding CurrentVolunteer.phone, Mode=TwoWay, NotifyOnValidationError=true, ValidatesOnExceptions=true}" HorizontalAlignment="Left" Height="25" TextWrapping="Wrap" VerticalAlignment="Top" Width="200"/>
                </Grid>

                <!-- Volunteer full address field -->
                <Grid Margin="0,0,0,5">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="120" />
                        <ColumnDefinition Width="*" />
                    </Grid.ColumnDefinitions>
                    <Label Content="Full Address" HorizontalAlignment="Left" Height="20" VerticalAlignment="Top" Width="90"/>
                    <TextBox Grid.Column="1" Text="{Binding CurrentVolunteer.currentAddress, Mode=TwoWay, NotifyOnValidationError=true, ValidatesOnExceptions=true}" HorizontalAlignment="Left" Height="25" TextWrapping="Wrap" VerticalAlignment="Center" Width="200"/>
                </Grid>

                <!-- Volunteer role field -->
                <Grid Margin="0,0,0,5">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="120" />
                        <ColumnDefinition Width="*" />
                    </Grid.ColumnDefinitions>
                    <Label Content="Role" HorizontalAlignment="Left" Height="20" VerticalAlignment="Top" Width="90"/>
                    <ComboBox Grid.Column="1" SelectedItem="{Binding CurrentVolunteer.role, Mode=TwoWay, NotifyOnValidationError=true, ValidatesOnExceptions=true}" ItemsSource="{Binding Source={StaticResource VolunteerRolesKey}}" HorizontalAlignment="Left" Height="25" VerticalAlignment="Top" Width="200"
                        IsEnabled="False"/>
                </Grid>

                <!-- Volunteer activity status -->
                <Grid Margin="0,0,0,5">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="120" />
                        <ColumnDefinition Width="*" />
                    </Grid.ColumnDefinitions>
                    <Label Content="Active" HorizontalAlignment="Left" Width="90" Margin="0,0,0,5"/>
                    <CheckBox Grid.Column="1" IsChecked="{Binding Path=CurrentVolunteer.active}" Content="Active Volunteer" 
                             IsEnabled="{Binding Call, Converter={StaticResource ConvertNullToTrueKey}}"   HorizontalAlignment="Left" Height="25" VerticalAlignment="Top" Width="110"/>
                </Grid>

                <!-- Volunteer maximum distance for calls -->
                <Grid Margin="0,0,0,5">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="120" />
                        <ColumnDefinition Width="*" />
                    </Grid.ColumnDefinitions>
                    <Label Content="Max Distance for Call" HorizontalAlignment="Left" Height="20" VerticalAlignment="Bottom" Width="90" Margin="0,0,0,5"/>
                    <TextBox Grid.Column="1" Text="{Binding CurrentVolunteer.maxDistance, Mode=TwoWay, NotifyOnValidationError=true, ValidatesOnExceptions=true}" HorizontalAlignment="Left" Height="25" TextWrapping="Wrap" VerticalAlignment="Top" Width="200"/>
                </Grid>

                <!-- Distance type field -->
                <Grid Margin="0,0,0,5">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="120" />
                        <ColumnDefinition Width="*" />
                    </Grid.ColumnDefinitions>
                    <Label Content="Distance Type" HorizontalAlignment="Left" Height="20" VerticalAlignment="Top" Width="90"/>
                    <ComboBox Grid.Column="1" SelectedItem="{Binding CurrentVolunteer.distanceType, Mode=TwoWay, NotifyOnValidationError=true, ValidatesOnExceptions=true}" ItemsSource="{Binding Source={StaticResource DistanceTypeKey}}" HorizontalAlignment="Left" Height="25" VerticalAlignment="Top" Width="200"/>
                </Grid>
                <!-- Number of calls handled -->
                <Grid Margin="0,0,0,5">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="120" />
                        <ColumnDefinition Width="*" />
                    </Grid.ColumnDefinitions>
                    <Label Content="Calls Handled" HorizontalAlignment="Left" Height="20" VerticalAlignment="Top" Width="90"/>
                    <TextBox Grid.Column="1" Text="{Binding CurrentVolunteer.numCallsHandled}" HorizontalAlignment="Left" Height="25" TextWrapping="Wrap" VerticalAlignment="Top" Width="200" IsReadOnly="True"/>
                </Grid>

                <!-- Number of calls cancelled -->
                <Grid Margin="0,0,0,5">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="120" />
                        <ColumnDefinition Width="*" />
                    </Grid.ColumnDefinitions>
                    <Label Content="Calls Cancelled" HorizontalAlignment="Left" Height="20" VerticalAlignment="Top" Width="90"/>
                    <TextBox Grid.Column="1" Text="{Binding CurrentVolunteer.numCallsCancelled}" HorizontalAlignment="Left" Height="25" TextWrapping="Wrap" VerticalAlignment="Top" Width="200" IsReadOnly="True"/>
                </Grid>

                <!-- Number of calls expired -->
                <Grid Margin="0,0,0,5">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="120" />
                        <ColumnDefinition Width="*" />
                    </Grid.ColumnDefinitions>
                    <Label Content="Calls Expired" HorizontalAlignment="Left" Height="20" VerticalAlignment="Top" Width="90"/>
                    <TextBox Grid.Column="1" Text="{Binding CurrentVolunteer.numCallsExpired}" HorizontalAlignment="Left" Height="25" TextWrapping="Wrap" VerticalAlignment="Top" Width="200" IsReadOnly="True"/>
                </Grid>


                <!-- New Button for Left Panel -->
                <Button Content="Update Volunteer Info" Margin="0,10,0,0" Height="30" Width="150" HorizontalAlignment="Left" Click="Button_Click"/>
            </StackPanel>
        </ScrollViewer>

        <!-- Right Stack Panel - Call Details -->
        <ScrollViewer Grid.Column="1" Grid.Row="0" VerticalScrollBarVisibility="Auto">
            <StackPanel Visibility="{Binding Call, Converter={StaticResource ConvertNullToVisibilityKey}}">
                <!-- Original call details content stays exactly the same -->
                <!-- ... (all call details fields remain unchanged) ... -->
                <Label>Content="call Diteails "</Label>

                <!-- Call ID -->
                <Grid Margin="0,0,0,5">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="150" />
                        <ColumnDefinition Width="*" />
                    </Grid.ColumnDefinitions>
                    <Label Content="Call ID" HorizontalAlignment="Right" VerticalAlignment="Top" Width="130"/>
                    <TextBox Grid.Column="1" Text="{Binding Call.ID}" HorizontalAlignment="Right"  VerticalAlignment="Top" Width="200" Height="25" IsReadOnly="True"/>
                </Grid>

                <!-- Call Type -->
                <Grid Margin="0,0,0,5">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="150" />
                        <ColumnDefinition Width="*" />
                    </Grid.ColumnDefinitions>
                    <Label Content="Call Type" HorizontalAlignment="Right" VerticalAlignment="Top" Width="130"/>
                    <ComboBox Grid.Column="1" IsEnabled="False" SelectedItem="{Binding Call.callT}"  ItemsSource="{Binding Source={StaticResource callTypeKey}}" HorizontalAlignment="Right" VerticalAlignment="Top" Width="200" Height="25"/>
                </Grid>

                <!-- Verbal Description -->
                <Grid Margin="0,0,0,5">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="150" />
                        <ColumnDefinition Width="*" />
                    </Grid.ColumnDefinitions>
                    <Label Content="Description" HorizontalAlignment="Right" VerticalAlignment="Top" Width="130"/>
                    <TextBox Grid.Column="1" Text="{Binding Call.verbalDescription}" HorizontalAlignment="Right"   IsReadOnly="True" VerticalAlignment="Top" Width="200" Height="25"/>
                </Grid>

                <!-- Address -->
                <Grid Margin="0,0,0,5">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="150" />
                        <ColumnDefinition Width="*" />
                    </Grid.ColumnDefinitions>
                    <Label Content="Address" HorizontalAlignment="Right" VerticalAlignment="Top" Width="130"/>
                    <TextBox Grid.Column="1" Text="{Binding Call.address}" HorizontalAlignment="Right"   IsReadOnly="True" VerticalAlignment="Top" Width="200" Height="25"/>
                </Grid>

                <!-- Open Time -->
                <Grid Margin="0,0,0,5">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="150" />
                        <ColumnDefinition Width="*" />
                    </Grid.ColumnDefinitions>
                    <Label Content="Open Time" HorizontalAlignment="Right" VerticalAlignment="Top" Width="130"/>
                    <DatePicker Grid.Column="1" SelectedDate="{Binding Call.openTime}" HorizontalAlignment="Right" IsEnabled="False" VerticalAlignment="Top" Width="200" Height="25"/>
                </Grid>

                <!-- Max Time -->
                <Grid Margin="0,0,0,5">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="150" />
                        <ColumnDefinition Width="*" />
                    </Grid.ColumnDefinitions>
                    <Label Content="Max Time" HorizontalAlignment="Right" VerticalAlignment="Top" Width="130"/>
                    <DatePicker Grid.Column="1" SelectedDate="{Binding Call.maxTime}" HorizontalAlignment="Right" IsEnabled="False" VerticalAlignment="Top" Width="200" Height="25"/>
                </Grid>

                <!-- Status -->
                <Grid Margin="0,0,0,5">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="150" />
                        <ColumnDefinition Width="*" />
                    </Grid.ColumnDefinitions>
                    <Label Content="Status" HorizontalAlignment="Right" VerticalAlignment="Top" Width="130"/>
                    <ComboBox Grid.Column="1" SelectedItem="{Binding Call.statusC}" IsEnabled="False"  ItemsSource="{Binding Source={StaticResource statusCKey}}" HorizontalAlignment="Left" VerticalAlignment="Center" Width="200" Height="25" Margin="50,0,0,0"/>
                </Grid>

                <!-- Call Assignments -->
                <!--<Grid Margin="0,0,0,5">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="150" />
                    <ColumnDefinition Width="*" />
                </Grid.ColumnDefinitions>
                <Label Content="Assignments" HorizontalAlignment="Right" VerticalAlignment="Top" Width="130"/>
                <ListBox Grid.Column="1" ItemsSource="{Binding Call.CallAssign}" DisplayMemberPath="AssignmentName" HorizontalAlignment="Right" VerticalAlignment="Top" Width="200" Height="100"/>
            </Grid>-->
                <Grid Margin="0,0,0,5">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="150" />
                        <ColumnDefinition Width="*" />
                    </Grid.ColumnDefinitions>
                    <Label Content="Assignments" HorizontalAlignment="Right" VerticalAlignment="Top" Width="130" />
                    <ListBox Grid.Column="1" ItemsSource="{Binding Call.CallAssign}" HorizontalAlignment="Right" VerticalAlignment="Top" Width="300"  IsEnabled="True" Height="200">
                        <ListBox.ItemTemplate>
                            <DataTemplate>
                                <Border BorderBrush="Gray" BorderThickness="1" CornerRadius="5" Padding="10" Margin="5">
                                    <StackPanel>
                                        <!-- Volunteer ID -->
                                        <TextBlock>
                            <Run Text="Volunteer ID: " FontWeight="Bold" />
                            <Run Text="{Binding VolunteerId}" />
                                        </TextBlock>

                                        <!-- Full Name -->
                                        <TextBlock>
                            <Run Text="Name: " FontWeight="Bold" />
                            <Run Text="{Binding fullName}" />
                                        </TextBlock>

                                        <!-- Start Treatment -->
                                        <TextBlock>
                            <Run Text="Start Treatment: " FontWeight="Bold" />
                            <Run Text="{Binding startTreatment, StringFormat=\{0:yyyy-MM-dd HH:mm\}}" />
                                        </TextBlock>

                                        <!-- Finish Treatment -->
                                        <TextBlock>
                            <Run Text="Finish Treatment: " FontWeight="Bold" />
                            <Run Text="{Binding finishTreatment, StringFormat=\{0:yyyy-MM-dd HH:mm\}}" />
                                        </TextBlock>

                                        <!-- Finish Type -->
                                        <TextBlock>
                            <Run Text="Finish Type: " FontWeight="Bold" />
                            <Run Text="{Binding finishT}" />
                                        </TextBlock>
                                    </StackPanel>
                                </Border>
                            </DataTemplate>
                        </ListBox.ItemTemplate>
                    </ListBox>
                </Grid>

                <!-- Two New Buttons for Right Panel -->
                <StackPanel Orientation="Horizontal" HorizontalAlignment="Right" Margin="0,10,0,0">
                    <Button Content="End Call" Height="30" Width="120" Margin="0,0,10,0" Click="EndCall_Click" />
                    <Button Content="Cancel Call" Height="30" Width="120" Click="CancelCall_Click"  />
                </StackPanel>
            </StackPanel>
        </ScrollViewer>

        <!-- Bottom Buttons Row -->
        <StackPanel Grid.Row="1" Grid.ColumnSpan="2" Orientation="Horizontal" HorizontalAlignment="Center" VerticalAlignment="Center">
            <Button Content="New Call" Height="47" Width="188" Margin="0,0,20,0" IsEnabled="{Binding Call, Converter={StaticResource ConvertNullToTrueKey}}" Visibility="{Binding CurrentVolunteer.active, Converter={StaticResource ConvertFalseToHiddenKey}}" Click="NewCall_Click" />
            <Button Content="My Calls History" Height="47" Width="219"  Click="CallHistory_Click"/>
        </StackPanel>
    </Grid>
</Window>